<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="clr-namespace:HasteNotes.ViewModels"
        x:Class="HasteNotes.Views.Notes"
        x:DataType="vm:NotesViewModel"
        Width="800" Height="600"
        Title="{Binding Title}">

	<Grid ColumnDefinitions="*,300" RowDefinitions="Auto,Auto,*,Auto">

		<!-- Menu -->
		<Menu Grid.Row="0" Grid.ColumnSpan="2">
			<MenuItem Header="_File">
				<MenuItem Header="_New" />
				<MenuItem Header="_Open..." />
				<MenuItem Header="_Save" />
				<Separator/>
				<MenuItem Header="E_xit" />
			</MenuItem>
		</Menu>

		<!-- Toolbar -->
		<Grid Grid.Row="1" Grid.ColumnSpan="2" Margin="12,8,12,8"
              ColumnDefinitions="Auto,8,Auto">
			<Button Content="Add" Command="{Binding AddCommand}" />
			<Rectangle Grid.Column="1" Width="8"/>
			<Button Grid.Column="2" Content="Edit" Command="{Binding EditCommand}" />
		</Grid>

		<!-- Notes area -->
		<StackPanel Grid.Row="2" Grid.Column="0" Margin="12" Spacing="8" IsVisible="{Binding SelectedNote, Converter={x:Static ObjectConverters.IsNotNull}}">

			<!-- Note Title -->
			<TextBlock Text="{Binding SelectedNote.Title}" FontSize="18" FontWeight="Bold"/>

			<!-- Boss info: only visible if boss note -->
			<StackPanel IsVisible="{Binding IsBossNoteVisible}" Margin="0,4,0,8" Spacing="8">

				<!-- Header -->
				<TextBlock Text="{Binding SelectedNote.SelectedBoss.BossName}" FontWeight="Bold"/>
				<Grid ColumnDefinitions="*,*,*" Margin="0,0,0,8">
					<TextBlock Text="HP" FontWeight="Bold"/>
					<TextBlock Text="Steals" Grid.Column="1" FontWeight="Bold"/>
					<TextBlock Text="Items" Grid.Column="2" FontWeight="Bold"/>
				</Grid>

				<!-- Data -->
				<Grid ColumnDefinitions="*,*,*">

					<!-- HP -->
					<TextBlock Text="{Binding SelectedNote.SelectedBoss.Hp}" />

					<!-- Steals -->
					<ItemsControl ItemsSource="{Binding SelectedNote.SelectedBoss.VisibleSteals}">
					<ItemsControl.ItemTemplate>
						<DataTemplate>
							<TextBlock Text="{Binding Display}" />
						</DataTemplate>
					</ItemsControl.ItemTemplate>
				</ItemsControl>

				<ItemsControl ItemsSource="{Binding SelectedNote.SelectedBoss.VisibleItems}">
					<ItemsControl.ItemTemplate>
						<DataTemplate>
							<TextBlock Text="{Binding Display}" />
						</DataTemplate>
					</ItemsControl.ItemTemplate>
				</ItemsControl>


				</Grid>
			</StackPanel>


			<!-- Note Content -->
			<Border BorderBrush="#DDD" BorderThickness="1" CornerRadius="4">
				<ScrollViewer HorizontalScrollBarVisibility="Auto"
                              VerticalScrollBarVisibility="Auto">
					<TextBlock Text="{Binding SelectedNote.Content}" TextWrapping="Wrap" Padding="10"/>
				</ScrollViewer>
			</Border>
		</StackPanel>

		<!-- Checklist sidebar -->
		<Border Grid.Row="2" Grid.Column="1" Margin="8,12,12,12"
                BorderBrush="#DDD" BorderThickness="1" CornerRadius="4" Padding="12">
			<StackPanel Spacing="8">
				<TextBlock Text="checkboxes you can add" FontWeight="Bold" Margin="0,0,0,8"/>
				<ItemsControl ItemsSource="{Binding Checklist}">
					<ItemsControl.ItemTemplate>
						<DataTemplate x:DataType="vm:ChecklistItem">
							<CheckBox Content="{Binding Text}" IsChecked="{Binding IsChecked}"/>
						</DataTemplate>
					</ItemsControl.ItemTemplate>
				</ItemsControl>
			</StackPanel>
		</Border>

		<!-- Bottom nav -->
		<Grid Grid.Row="3" Grid.ColumnSpan="2" Margin="12,0,12,12"
              ColumnDefinitions="*,Auto,8,Auto,*">
			<Button Grid.Column="1" Content="Prev" Width="120" Command="{Binding PrevCommand}"/>
			<Button Grid.Column="3" Content="Next" Width="120" Command="{Binding NextCommand}"/>
		</Grid>
	</Grid>
</Window>
